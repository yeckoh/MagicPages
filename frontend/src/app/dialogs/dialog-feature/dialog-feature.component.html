<div class='dialogdiv'>

  <div><mat-form-field style='width: 80%;'><input matInput (focus)='!accentFocus' (blur)='!accentFocus' placeholder='accent color' (change)='sendFeatureDialogUpdate()' [(ngModel)]="feature.selected_color" name='feature.selected_color'></mat-form-field>
    <button mat-button (click)='deleteFeature()' class='mat-elevation-z4' style='width: 20%;' color='warn'>del</button>
  </div>
  <mat-form-field style='width: 100%;'><input matInput placeholder='title' (focus)='!titleFocus' (blur)='!titleFocus' (change)='sendFeatureDialogUpdate()' [(ngModel)]="feature.title" name='feature.title'></mat-form-field>

  <div>
    <mat-form-field><input matInput placeholder='uses (0 for none)' (change)='sendFeatureDialogUpdate()' [(ngModel)]='feature.uses' name='feature.uses'></mat-form-field>
  </div>

  <div><mat-form-field class='dialogtext'>
    <textarea matInput class='dialogtext' placeholder='description' (focus)='!descriptFocus' (blur)='!descriptFocus' (change)='sendFeatureDialogUpdate()' style='overflow:hidden; resize: none;' [(ngModel)]="feature.descript" name='feature.descript'></textarea>
  </mat-form-field></div>
  <mat-divider></mat-divider>

  <div style='display: flex;'><button mat-button class='mat-elevation-z4' color='primary' (click)='newAttack()'>New Attack</button>
  <button mat-button class='mat-elevation-z4' color='primary' (click)='newSave()'>New Saving Throw</button>
<!--
  <button mat-button class='mat-elevation-z4' color='primary'>New Proficiency?</button>
-->
  </div>

  <div class='attunementseparatorlabel'> Attacks </div>
  <div *ngFor="let attack of feature.listof_atks" (click)='openAttackDialog(attack)'>
    <table> <!-- attack item -->
      <tr><td rowspan='2' class='attackbonus'>
        <label *ngIf="nonRegularFormula(attack.atkbonus) > -1">+</label>
        {{nonRegularFormula(attack.atkbonus)}}</td>
          <td class='damagedice'>
            {{nonRegularFormula(attack.damage)}}
          </td>
        </tr>
        <tr *ngIf="attack.details != ''">
          <td class='damagedice'>
            {{attack.details}}
          </td>
        </tr>
      </table>
  </div>

  <div class='attunementseparatorlabel'> Saves </div>
  <div *ngFor="let save of feature.listof_saves" (click)='openSaveDialog(save)'>
    <table> <!-- save item -->
      <tr><td rowspan='2' class='attackbonus'>
        {{nonRegularFormula(save.saveDC)}}</td>
          <td class='damagedice'>
            {{nonRegularFormula(save.damage)}}
          </td>
        </tr>
        <tr *ngIf="save.details != ''">
          <td class='damagedice'>
            {{save.details}}
          </td>
        </tr>
      </table>
  </div>
<!--
  <div *ngFor="let item of feature.listof_featureprofs">
    <p>ngfor profs</p>
  </div>
-->
</div>
